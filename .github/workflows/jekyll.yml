# æ–‡ä»¶è·¯å¾„: .github/workflows/jekyll.yml
name: Build and Deploy Jekyll Site

on:
  push:
    branches:
      - main  # æˆ–è€… masterï¼Œå–å†³äºä½ çš„ä¸»åˆ†æ”¯å

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 

      - name: Setup Ruby âœ¨
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1' # é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ Ruby ç‰ˆæœ¬ï¼Œå¯ä»¥å‚è€ƒä¸»é¢˜æ–‡æ¡£
          bundler-cache: true # è‡ªåŠ¨ç¼“å­˜å’Œå®‰è£… gems

      - name: Build Jekyll Site ğŸ”¨
        run: bundle exec jekyll build

      - name: Deploy ğŸš€
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./_site
          # å¦‚æœä½ æƒ³éƒ¨ç½²åˆ° <username>.github.ioï¼Œé€šå¸¸ä¸éœ€è¦æŒ‡å®š cname æˆ– publish_branch
          # å¦‚æœéƒ¨ç½²åˆ°é¡¹ç›®é¡µé¢ï¼Œå¯èƒ½éœ€è¦è®¾ç½® publish_branch: 'gh-pages'
