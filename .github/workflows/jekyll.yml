# 文件路径: .github/workflows/jekyll.yml
name: Build and Deploy Jekyll Site

on:
  push:
    branches:
      - main  # 或者 master，取决于你的主分支名

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 

      - name: Setup Ruby ✨
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1' # 选择一个合适的 Ruby 版本，可以参考主题文档
          bundler-cache: true # 自动缓存和安装 gems

      - name: Build Jekyll Site 🔨
        run: bundle exec jekyll build

      - name: Deploy 🚀
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./_site
          # 如果你想部署到 <username>.github.io，通常不需要指定 cname 或 publish_branch
          # 如果部署到项目页面，可能需要设置 publish_branch: 'gh-pages'
